<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Generator" content="xquerydoc - https://github.com/xquery/xquerydoc"/><title>xqDoc - </title><style type="text/css">
          body {
          font-family: Helvetica;
          padding: 0.5em  1em;
          }
          pre {
          font-family: Inconsolata, Consolas, monospace;
          }
          ol.results {
          padding-left: 0;
          }
          .footer {
          text-align:right;
          border-top: solid 4px;
          padding: 0.25em 0.5em;
          font-size: 85%;
          color: #999;
          }
          li.result {
          list-style-position: inside;
          list-style: none;
          height:140px;
          }
          h2 {
          display: inline-block;
          margin: 0;
          }

          h2 a,
          .result h3 a {
          text-decoration: inherit;
          color: inherit;
          }
          h3{
	  font-size: 140%;
	  background-color: #aaa;
	  border-bottom: 1px solid #000;
	  width: 100%;
	  }
          h4{
	  font-size: 100%;
	  background-color: #ddd;
	  width: 90%;
	  }

          .namespace {
          color: #999;
          }
          .namespace:before {
          content: "{";
          }
          .namespace:after {
          content: "}";
          }
          table{
          width:75%;
          float:right;
          }
          td {
          height:100px;
          width:50%;
          vertical-align:text-top;
          }
        </style><script src="lib/prettify.js" type="text/javascript"> </script><script src="lib/lang-xq.js" type="text/javascript"> </script><link rel="stylesheet" type="text/css" href="lib/prettify.css"/></head><body class="home"><div id="main"><h1><span class="namespace">txproc</span>  library module </h1><div id="variables"><h3>Variables</h3></div><div id="functions"><h3>Functions</h3><div id="func_TEST_) txproc_loadModuleTest_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:loadModuleTest()</pre></h4></div><div id="func_TEST_) txproc_enumNSTest_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:enumNSTest()</pre></h4></div><div id="func_TEST_) txproc_stepNamesTest_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:stepNamesTest()</pre></h4></div><div id="func_TEST_) txproc_runEntryPointTest_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runEntryPointTest()</pre></h4></div><div id="func_TEST_) txproc_runEntryPointTest1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runEntryPointTest1()</pre></h4></div><div id="func_TEST_) txproc_runEntryPointTest2_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runEntryPointTest2()</pre></h4></div><div id="func_&#xA;TEST_) txproc_runEntryPointTest3_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: 
TEST:) txproc:runEntryPointTest3()</pre></h4></div><div id="func_TEST_) txproc_runEntryPointTest4_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runEntryPointTest4()</pre></h4></div><div id="func_TEST_) txproc_runDynamicError_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runDynamicError()</pre></h4></div><div id="func_TEST_) txproc_runComplexSingleBranch_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runComplexSingleBranch()</pre></h4></div><div id="func_TEST_) txproc_runGroup_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runGroup()</pre></h4></div><div id="func_TEST_) txproc_runTryCatch_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runTryCatch()</pre></h4></div><div id="func_TEST_) txproc_runTryCatch1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runTryCatch1()</pre></h4></div><div id="func_TEST_) txproc_runForEach_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runForEach()</pre></h4></div><div id="func_TEST_) txproc_runViewPort_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runViewPort()</pre></h4></div><div id="func_TEST_) txproc_runChoose_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runChoose()</pre></h4></div><div id="func_TEST_) txproc_runChoose1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runChoose1()</pre></h4></div><div id="func_TEST_) txproc_runCompare1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runCompare1()</pre></h4></div><div id="func_TEST_) txproc_runCount1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runCount1()</pre></h4></div><div id="func_TEST_) txproc_runCount2_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runCount2()</pre></h4></div><div id="func_TEST_) txproc_runDelete1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runDelete1()</pre></h4></div><div id="func_TEST_) txproc_runPack1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runPack1()</pre></h4></div><div id="func_TEST_) txproc_runDeclareStep1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runDeclareStep1()</pre></h4></div><div id="func_TEST_) txproc_runRename1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runRename1()</pre></h4></div><div id="func_TEST_) txproc_runExtXProc1_0"><h4><pre class="prettyprint lang-xq"><u>Function</u>: TEST:) txproc:runExtXProc1()</pre></h4></div></div><div><h3>Original Source Code</h3><pre class="prettyprint lang-xq">xquery version "3.0";

module namespace txproc ="txproc";

declare namespace p="http://www.w3.org/ns/xproc";
declare namespace c="http://www.w3.org/ns/xproc-step";
declare namespace err="http://www.w3.org/ns/xproc-error";
declare namespace ext ="http://xproc.net/xproc/ext";
                    
import module namespace test = "http://www.marklogic.com/test"
    at "../lib/test.xqm";
              
import module namespace xproc = "http://xproc.net/xproc"
    at "../../xquery/xproc.xqm";

import module namespace parse = "http://xproc.net/xproc/parse"
    at "../../xquery/parse.xqm";
    

declare function (:TEST:) txproc:loadModuleTest() { 
  let $actual := &lt;test/&gt;
  return
    test:assertXMLEqual($actual,&lt;test/&gt;) 
};


declare function (:TEST:) txproc:enumNSTest() { 
  let $pipeline := fn:doc('data/submit-test-report.xpl')
  let $result := xproc:enum-namespaces($pipeline)

  return
    $result
};


declare function (:TEST:) txproc:stepNamesTest() { 
  let $pipeline := fn:doc('data/test2.xpl')
  let $parse   :=  parse:explicit-bindings( parse:AST(parse:explicit-name(parse:explicit-type($pipeline))))
  let $b := $parse/*
  let $ast   := element p:declare-step {$parse/@*,
   namespace p {"http://www.w3.org/ns/xproc"},
   namespace xproc {"http://xproc.net/xproc"},
   namespace ext {"http://xproc.net/xproc/ext"},
   namespace opt {"http://xproc.net/xproc/opt"},
   namespace c {"http://www.w3.org/ns/xproc-step"},
   namespace err {"http://www.w3.org/ns/xproc-error"},
   namespace xxq-error {"http://xproc.net/xproc/error"},
   parse:pipeline-step-sort( $b, &lt;p:declare-step xproc:default-name="!1"/&gt; )
 }
  
  let $result := xproc:genstepnames($ast)
  return  
    $result
};


declare function (:TEST:) txproc:runEntryPointTest() { 
  let $pipeline := fn:doc('data/test2.xpl')
  let $stdin    := &lt;test/&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $result   := xproc:run($pipeline,$stdin,$bindings,$options,(),$dflag,$tflag)
  return
    $result
};


declare function (:TEST:) txproc:runEntryPointTest1() { 
  let $pipeline := fn:doc('data/simple.xpl')
  let $stdin    := ()
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $result   := xproc:run($pipeline,$stdin,$bindings,$options,(),$dflag,$tflag)
  return
    $result
};

declare function (:TEST:) txproc:runEntryPointTest2() { 
  let $pipeline := fn:doc('data/test2.xpl')
  let $stdin    := &lt;test/&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,(),$dflag,$tflag)
};

declare function (:
TEST:) txproc:runEntryPointTest3() { 
  let $pipeline := fn:doc('data/test2.xpl')
  let $stdin    := &lt;test/&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,(),$dflag,$tflag)
};


declare function (:TEST:) txproc:runEntryPointTest4() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:identity/&gt;&lt;p:count/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runDynamicError() { 
  let $pipeline := fn:doc('data/error.xpl')
  let $stdin    := &lt;test/&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $output   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$output,$dflag,$tflag)
};


declare function (:TEST:) txproc:runComplexSingleBranch() { 
  let $pipeline := fn:doc('data/complex-single-branch.xpl')
  let $stdin    := &lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $output   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$output,$dflag,$tflag)
};

declare function (:TEST:) txproc:runGroup() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:group&gt;&lt;p:identity/&gt;&lt;p:count/&gt;&lt;/p:group&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runTryCatch() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:try&gt;&lt;p:wrap wrapper="wrapme" match="/"/&gt;&lt;/p:try&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runTryCatch1() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:try&gt;&lt;p:wrap wrapper="2" match="/"/&gt;&lt;/p:try&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runForEach() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:for-each&gt;&lt;p:iteration-source select="//a"/&gt;&lt;p:wrap wrapper="d" match="/"/&gt;&lt;/p:for-each&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;1&lt;/a&gt;&lt;b&gt;2&lt;/b&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runViewPort() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:viewport&gt;&lt;p:viewport-source select="//a"/&gt;&lt;p:wrap wrapper="z" match="/"/&gt;&lt;/p:viewport&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;&lt;a&gt;1&lt;/a&gt;&lt;b&gt;&lt;a&gt;&lt;l&gt;test&lt;/l&gt;&lt;/a&gt;&lt;/b&gt;&lt;r&gt;&lt;a&gt;&lt;l&gt;test&lt;/l&gt;&lt;/a&gt;&lt;/r&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runChoose() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:choose&gt;&lt;p:xpath-context select="//a"/&gt;&lt;p:when test="count(a) eq 2"&gt;&lt;p:wrap wrapper="z" match="/"/&gt;&lt;/p:when&gt;&lt;p:otherwise&gt;&lt;p:count/&gt;&lt;/p:otherwise&gt;&lt;/p:choose&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;&lt;a&gt;test1&lt;/a&gt;&lt;a&gt;test2&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runChoose1() { 
  let $pipeline := &lt;p:declare-step name="main"&gt;
&lt;p:input port="source"/&gt;&lt;p:output port="result"/&gt;
&lt;p:choose&gt;&lt;p:xpath-context select="//a"/&gt;&lt;p:when test="count(a) lt 1"&gt;&lt;p:wrap wrapper="z" match="/"/&gt;&lt;/p:when&gt;&lt;p:otherwise&gt;&lt;p:count/&gt;&lt;/p:otherwise&gt;&lt;/p:choose&gt;&lt;p:identity/&gt;&lt;/p:declare-step&gt;
  let $stdin    := &lt;c&gt;&lt;a&gt;test1&lt;/a&gt;&lt;a&gt;test2&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runCompare1() { 
  let $pipeline := &lt;p:declare-step version='1.0' name="main"
	    xmlns:p="http://www.w3.org/ns/xproc"&gt;
  &lt;p:input port="source" primary="true"/&gt;
  &lt;p:input port="alternate" primary="false"&gt;
    &lt;p:inline&gt;
      &lt;c&gt;here&lt;/c&gt;
    &lt;/p:inline&gt;
  &lt;/p:input&gt;

  &lt;p:output port="result" primary="true"/&gt;

  &lt;p:compare name="compare"&gt;
    &lt;p:input port="source"&gt;
      &lt;p:pipe step="main" port="source"/&gt;
    &lt;/p:input&gt;
    &lt;p:input port="alternate"&gt;
      &lt;p:pipe step="main" port="alternate"/&gt;
    &lt;/p:input&gt;
  &lt;/p:compare&gt;
&lt;/p:declare-step&gt;

  let $stdin    := &lt;c&gt;&lt;a&gt;test1&lt;/a&gt;&lt;a&gt;test2&lt;/a&gt;&lt;/c&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   :=  ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runCount1() { 
  let $pipeline :=   &lt;p:declare-step version='1.0'&gt;
    &lt;p:input port="source" sequence="true"/&gt;
    &lt;p:output port="result"/&gt;

    &lt;p:count/&gt;

  &lt;/p:declare-step&gt;

  let $stdin    :=  (&lt;document&gt;
    &lt;doc xmlns=""/&gt;
  &lt;/document&gt;,
  &lt;document&gt;
    &lt;doc xmlns=""/&gt;
  &lt;/document&gt;,
  &lt;document&gt;
    &lt;doc xmlns=""/&gt;
  &lt;/document&gt;)
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   :=  ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};



declare function (:TEST:) txproc:runCount2() { 
  let $pipeline :=     &lt;p:declare-step version='1.0'&gt;
    &lt;p:input port="source" sequence="true"/&gt;
    &lt;p:output port="result"/&gt;
    &lt;p:count&gt;
        &lt;p:input port="source" select="/node()"/&gt;
    &lt;/p:count&gt;
  &lt;/p:declare-step&gt;

  let $stdin    :=  &lt;doc&gt;
    &lt;p&gt;This is a para&lt;/p&gt;
    &lt;p&gt;This is a para&lt;/p&gt;
    &lt;p&gt;This is a para&lt;/p&gt;
    &lt;p&gt;This is a para&lt;/p&gt;
    &lt;p&gt;This is a para&lt;/p&gt;
&lt;/doc&gt;

  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   :=  ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runDelete1() { 
  let $pipeline := &lt;pipeline version='1.0' name="pipeline" xmlns="http://www.w3.org/ns/xproc"&gt;

&lt;delete match="p:delete"/&gt;

&lt;/pipeline&gt;


  let $stdin    := &lt;pipeline name="pipeline" xmlns="http://www.w3.org/ns/xproc"&gt;

&lt;delete&gt;
  &lt;option name="target" value="delete"/&gt;
&lt;/delete&gt;

&lt;/pipeline&gt;

  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   :=  ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};



declare function (:TEST:) txproc:runPack1() { 
  let $pipeline := &lt;p:declare-step version='1.0' name="pipeline"
	    xmlns:p="http://www.w3.org/ns/xproc"&gt;
&lt;p:input port="source" sequence="true"/&gt;
&lt;p:input port="alt" sequence="true"/&gt;
&lt;p:output port="result"/&gt;

&lt;p:pack wrapper="wrapper"&gt;
  &lt;p:input port="source"&gt;
    &lt;p:pipe step="pipeline" port="source"/&gt;
  &lt;/p:input&gt;
  &lt;p:input port="alternate"&gt;
    &lt;p:pipe step="pipeline" port="alt"/&gt;
  &lt;/p:input&gt;
&lt;/p:pack&gt;

&lt;p:wrap-sequence wrapper="sequence-wrapper"/&gt;

&lt;/p:declare-step&gt;
  let $stdin    := (&lt;doc1/&gt;,&lt;doc2/&gt;,&lt;doc3/&gt;)
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs   := &lt;xproc:output port="alt" port-type="external" xproc:default-name="!1" step="!1"&gt;{
    (&lt;doc-a/&gt;,&lt;doc-b/&gt;,&lt;doc-c/&gt;)
}&lt;/xproc:output&gt; 
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runDeclareStep1() { 
  let $pipeline := &lt;p:declare-step version='1.0' xmlns:foo="http://acme.com/test"&gt;
      &lt;p:input port="source" sequence="true"/&gt;
      &lt;p:output port="result"/&gt;
      &lt;p:declare-step type="foo:test"&gt;
        &lt;p:input port="source" sequence="true"/&gt;
        &lt;p:output port="result"/&gt;
        &lt;p:count/&gt;
      &lt;/p:declare-step&gt;
      &lt;foo:test/&gt;
    &lt;/p:declare-step&gt;

  let $stdin    := (&lt;doc/&gt;,&lt;doc/&gt;)
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs  := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};


declare function (:TEST:) txproc:runRename1() { 
  let $pipeline := 
    &lt;p:pipeline version='1.0'&gt;

      &lt;p:rename match="@test:foo" new-name="test2:bar"
                xmlns:test="http://test.com" xmlns:test2="http://test2.com"/&gt;

    &lt;/p:pipeline&gt;

  let $stdin    := &lt;doc test:foo="value" xmlns:test="http://test.com"/&gt;
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs  := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};

declare function (:TEST:) txproc:runExtXProc1() { 
  let $pipeline := 
    &lt;p:pipeline version='1.0'&gt;

      &lt;ext:xproc&gt;
      &lt;p:input port="pipeline"&gt;
      &lt;p:inline&gt;
        &lt;p:pipeline version='1.0'&gt;
          &lt;p:identity/&gt;
          &lt;p:count/&gt;
        &lt;/p:pipeline&gt;
      &lt;/p:inline&gt;
      &lt;/p:input&gt;
      &lt;/ext:xproc&gt;

    &lt;/p:pipeline&gt;

  let $stdin    := (&lt;doc test:foo="value" xmlns:test="http://test.com"/&gt;,&lt;test/&gt;)
  let $dflag    := 0
  let $tflag    := 0
  let $bindings := ()
  let $options  := ()
  let $outputs  := ()
  return
   $xproc:run-step($pipeline,$stdin,$bindings,$options,$outputs,$dflag,$tflag)
};
</pre></div><br/><div class="footer"><p style="text-align:right"><i/> |
          generated by xquerydoc <a href="https://github.com/xquery/xquerydoc" target="xquerydoc">https://github.com/xquery/xquerydoc</a></p></div></div><script type="application/javascript">
	  window.onload = function(){ prettyPrint(); }
	</script></body></html>