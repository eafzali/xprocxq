<p:declare-step xmlns:p="http://www.w3.org/ns/xproc" xmlns:xproc="http://xproc.net/xproc" exclude-inline-prefixes="c cx" name="main" version="1.0" xproc:type="comp-step" xproc:default-name="!1"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.0"><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output></ext:pre><p:string-replace name="patch-test-uris" xproc:type="std-step" xproc:step="true" xproc:default-name="!1.1"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:inline xproc:type="comp"> <test-suites>    <uri>/tests/required/test-suite.xml</uri><uri>/tests/serialization/test-suite.xml</uri><uri>/tests/optional/test-suite.xml</uri><uri>/tests/extension/test-suite.xml</uri></test-suites></p:inline></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="uri/text()"></p:with-option><p:with-option xproc:type="comp" name="replace" select="concat('concat(&quot;http://',$host,'&quot;,.)')"></p:with-option></p:string-replace><p:identity name="extract-uri" xproc:type="std-step" xproc:step="true" xproc:default-name="!1.2"><p:input port="source" select="/*/uri" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.1" xproc:step-name="!1.1"></p:pipe></p:input><p:output xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:output></p:identity><p:choose xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.3"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.3.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.3" xproc:step-name="!1.3"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"><p:empty xproc:type="comp"></p:empty></p:xpath-context></ext:pre><p:when test="$host = 'tests.xproc.org'" xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.3.2"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.3.2.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.3.2" xproc:step-name="!1.3.2"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"></p:xpath-context></ext:pre><p:wrap-sequence xproc:type="std-step" xproc:step="true" xproc:default-name="!1.3.2.2"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.2" xproc:step-name="!1.2"></p:pipe></p:input><p:output xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="wrapper" select="test-suites"></p:with-option><p:with-option xproc:type="comp" name="group-adjacent"></p:with-option></p:wrap-sequence></p:when><p:otherwise xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.3.3"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.3.3.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.3.3" xproc:step-name="!1.3.3"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"></p:xpath-context></ext:pre><p:wrap-sequence xproc:type="std-step" xproc:step="true" xproc:default-name="!1.3.3.1"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.2" xproc:step-name="!1.2"></p:pipe></p:input><p:output xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="wrapper" select="test-suites"></p:with-option><p:with-option xproc:type="comp" name="group-adjacent"></p:with-option></p:wrap-sequence></p:otherwise></p:choose><p:choose xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.4"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.4.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4" xproc:step-name="!1.4"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"></p:xpath-context></ext:pre><p:when test="$password = ''" xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.4.1"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.4.1.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.1" xproc:step-name="!1.4.1"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"></p:xpath-context></ext:pre><p:identity xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.1.2"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.1.0" xproc:step-name="!1.4.1.0"></p:pipe></p:input><p:output xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:output></p:identity></p:when><p:otherwise xproc:type="comp-step" xproc:step="true" xproc:default-name="!1.4.2"><ext:pre xmlns:ext="http://xproc.net/xproc/ext" xproc:step="true" xproc:default-name="!1.4.2.0"><p:input xmlns:p="http://www.w3.org/ns/xproc" port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2" xproc:step-name="!1.4.2"></p:pipe></p:input><p:output xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" port="result" primary="true" select="/"></p:output><p:xpath-context xmlns:p="http://www.w3.org/ns/xproc" xproc:type="comp" select="/"></p:xpath-context></ext:pre><p:wrap xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.1"><p:input port="source" select="/c:result/*" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.0" xproc:step-name="!1.4.2.0"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="wrapper" select="c:body"></p:with-option><p:with-option xproc:type="comp" name="match" select="/"></p:with-option><p:with-option xproc:type="comp" name="group-adjacent"></p:with-option></p:wrap><p:add-attribute xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.2"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.1" xproc:step-name="!1.4.2.1"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="c:body"></p:with-option><p:with-option xproc:type="comp" name="attribute-name" select="content-type"></p:with-option><p:with-option xproc:type="comp" name="attribute-prefix"></p:with-option><p:with-option xproc:type="comp" name="attribute-namespace"></p:with-option><p:with-option xproc:type="comp" name="attribute-value" select="application/xml"></p:with-option></p:add-attribute><p:wrap xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.3"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.2" xproc:step-name="!1.4.2.2"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="wrapper" select="c:request"></p:with-option><p:with-option xproc:type="comp" name="match" select="/"></p:with-option><p:with-option xproc:type="comp" name="group-adjacent"></p:with-option></p:wrap><p:add-attribute xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.4"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.3" xproc:step-name="!1.4.2.3"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="/c:request"></p:with-option><p:with-option xproc:type="comp" name="attribute-name" select="password"></p:with-option><p:with-option xproc:type="comp" name="attribute-prefix"></p:with-option><p:with-option xproc:type="comp" name="attribute-namespace"></p:with-option><p:with-option xproc:type="comp" name="attribute-value" select="$password"></p:with-option></p:add-attribute><p:add-attribute xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.5"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.4" xproc:step-name="!1.4.2.4"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="/c:request"></p:with-option><p:with-option xproc:type="comp" name="attribute-name" select="username"></p:with-option><p:with-option xproc:type="comp" name="attribute-prefix"></p:with-option><p:with-option xproc:type="comp" name="attribute-namespace"></p:with-option><p:with-option xproc:type="comp" name="attribute-value" select="$username"></p:with-option></p:add-attribute><p:add-attribute xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.6"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.5" xproc:step-name="!1.4.2.5"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="/c:request"></p:with-option><p:with-option xproc:type="comp" name="attribute-name" select="href"></p:with-option><p:with-option xproc:type="comp" name="attribute-prefix"></p:with-option><p:with-option xproc:type="comp" name="attribute-namespace"></p:with-option><p:with-option xproc:type="comp" name="attribute-value" select="concat('http://',$host,'/results/submit/report')"></p:with-option></p:add-attribute><p:set-attributes xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.7"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.6" xproc:step-name="!1.4.2.6"></p:pipe></p:input><p:input port="attributes" select="/" xproc:type="comp" primary="false"><p:inline xproc:type="comp"> <c:request xmlns:c="http://www.w3.org/ns/xproc-step" method="post" auth-method="Basic" send-authorization="true"></c:request></p:inline></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="match" select="c:request"></p:with-option></p:set-attributes><p:http-request xproc:type="std-step" xproc:step="true" xproc:default-name="!1.4.2.8"><p:input port="source" select="/" xproc:type="comp" primary="true"><p:pipe port="result" xproc:type="comp" step="!1.4.2.7" xproc:step-name="!1.4.2.7"></p:pipe></p:input><p:output xproc:type="comp" port="result" primary="true" select="/"></p:output><p:with-option xproc:type="comp" name="byte-order-mark"></p:with-option><p:with-option xproc:type="comp" name="cdata-section-elements"></p:with-option><p:with-option xproc:type="comp" name="doctype-public"></p:with-option><p:with-option xproc:type="comp" name="doctype-system"></p:with-option><p:with-option xproc:type="comp" name="encoding"></p:with-option><p:with-option xproc:type="comp" name="escape-uri-attributes"></p:with-option><p:with-option xproc:type="comp" name="include-content-type"></p:with-option><p:with-option xproc:type="comp" name="indent" select="'false'"></p:with-option><p:with-option xproc:type="comp" name="media-type"></p:with-option><p:with-option xproc:type="comp" name="method" select="'xml'"></p:with-option><p:with-option xproc:type="comp" name="normalization-form"></p:with-option><p:with-option xproc:type="comp" name="omit-xml-declaration"></p:with-option><p:with-option xproc:type="comp" name="standalone"></p:with-option><p:with-option xproc:type="comp" name="undeclare-prefixes"></p:with-option><p:with-option xproc:type="comp" name="version" select="'1.0'"></p:with-option></p:http-request></p:otherwise></p:choose></p:declare-step>
