<p:declare-step xmlns:xproc="http://xproc.net/xproc" xmlns:ext="http://xproc.net/xproc/ext" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:err="http://www.w3.org/ns/xproc-error" xmlns:xxq-error="http://xproc.net/xproc/error" xmlns:p="http://www.w3.org/ns/xproc" version="1.0" name="main" xproc:type="comp-step" xproc:default-name="!1"><ext:pre xproc:default-name="!1.0"><p:input xproc:type="comp" port="source" primary="true" select="/"><p:inline xproc:type="comp"><doc>
Congratulations! You've run your first pipeline!
</doc></p:inline></p:input><p:outport xproc:type="comp" port="result" primary="true" select="/"></p:outport></ext:pre><p:identity name="step1" xproc:step="true" xproc:type="std-step" xproc:default-name="!1.1"><p:input xproc:type="comp" port="source" sequence="true" primary="true" select="/"><p:pipe port="result" step="!1.0" xproc:default-step-name="!1.0"></p:pipe></p:input><p:outport xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:outport></p:identity><p:count limit="20" name="step2" xproc:step="true" xproc:type="std-step" xproc:default-name="!1.3"><p:input xproc:type="comp" port="source" primary="true" sequence="true" select="/"><p:pipe port="result" step="step1" xproc:default-step-name="!1.1"></p:pipe></p:input><p:outport xproc:type="comp" port="result" primary="true" select="/"></p:outport><p:with-option xproc:type="comp" name="limit" select="20"></p:with-option></p:count><p:identity name="step3" xproc:step="true" xproc:type="std-step" xproc:default-name="!1.2"><p:input xproc:type="comp" port="source" sequence="true" primary="true" select="/"><p:pipe port="result" step="step2" xproc:default-step-name="!1.3"></p:pipe></p:input><p:outport xproc:type="comp" port="result" sequence="true" primary="true" select="/"></p:outport></p:identity><ext:post xproc:default-name="!1.0!">
         <p:input port="source" primary="true">
         (: need to pipe in last step or override from top level p:output :)
         </p:input>
         <p:output port="stdout" select="/" primary="true"></p:output>
       </ext:post></p:declare-step>
