<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="Generator" content="xquerydoc - https://github.com/xquery/xquerydoc"/><title>xqDoc - </title><style type="text/css">
          body {
          font-family: Helvetica;
          padding: 0.5em  1em;
          }
          pre {
          font-family: Inconsolata, Consolas, monospace;
          }
          ol.results {
          padding-left: 0;
          }
          .footer {
          text-align:right;
          border-top: solid 4px;
          padding: 0.25em 0.5em;
          font-size: 85%;
          color: #999;
          }
          li.result {
          list-style-position: inside;
          list-style: none;
          height:140px;
          }
          h2 {
          display: inline-block;
          margin: 0;
          }

          h2 a,
          .result h3 a {
          text-decoration: inherit;
          color: inherit;
          }
          h3{
	  font-size: 140%;
	  background-color: #aaa;
	  border-bottom: 1px solid #000;
	  width: 100%;
	  }
          h4{
	  font-size: 100%;
	  background-color: #ddd;
	  width: 90%;
	  }

          .namespace {
          color: #999;
          }
          .namespace:before {
          content: "{";
          }
          .namespace:after {
          content: "}";
          }
          table{
          width:75%;
          float:right;
          }
          td {
          height:100px;
          width:50%;
          vertical-align:text-top;
          }
        </style><script src="lib/prettify.js" type="text/javascript"> </script><script src="lib/lang-xq.js" type="text/javascript"> </script><link rel="stylesheet" type="text/css" href="lib/prettify.css"/></head><body class="home"><div id="main"><h1><span class="namespace"/>  main module </h1><div id="variables"><h3>Variables</h3></div><div id="functions"><h3>Functions</h3></div><div><h3>Original Source Code</h3><pre class="prettyprint lang-xq">xquery version "3.0";

 declare namespace p="http://www.w3.org/ns/xproc";
 declare namespace c="http://www.w3.org/ns/xproc-step";
 declare namespace err="http://www.w3.org/ns/xproc-error";

import module namespace test = "http://www.marklogic.com/test"
    at "../lib/test.xqm";

import module namespace txproc = "txproc"
    at "txproc.xqy";

    
test:html(
&lt;testsuite title="xproc module"&gt;
  &lt;test name="xproc1" desc="xproc.xqm module load"&gt;
    &lt;expected&gt;true&lt;/expected&gt;
    &lt;result&gt;{txproc:loadModuleTest()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc2" desc="enum in-use namespaces"&gt;
    &lt;expected&gt;&lt;namespace name=""&gt;&lt;ns prefix="xml" URI="http://www.w3.org/XML/1998/namespace"&gt;&lt;/ns&gt;&lt;ns prefix="p" URI="http://www.w3.org/ns/xproc"&gt;&lt;/ns&gt;&lt;ns prefix="c" URI=""&gt;&lt;/ns&gt;&lt;/namespace&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:enumNSTest()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc3" desc="test getting step names of a pipe, in order"&gt;
    &lt;expected&gt;!1.0 !1.1 !1.3 !1.2 !1.0!&lt;/expected&gt;
    &lt;result&gt;{txproc:stepNamesTest()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc4" desc="simple xproc pipeline"&gt;
    &lt;expected&gt;&lt;doc&gt;
        Congratulations! You've run your first pipeline!
      &lt;/doc&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runEntryPointTest1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc4" desc="simple xproc pipeline"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runEntryPointTest4()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc4a" desc="test entry point with simple xproc pipeline"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runEntryPointTest()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc4b" desc="test entry point via HOX invoke xproc:run-step"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runEntryPointTest2()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc5" desc="test"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runEntryPointTest3()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc7" desc="run more complex single branch pipeline (complex-single-branch.xpl)"&gt;
    &lt;expected&gt;&lt;packed&gt;&lt;newwrapper&gt;&lt;a new-id="this is a new string"&gt;&lt;/a&gt;&lt;/newwrapper&gt;
   &lt;a&gt;test&lt;/a&gt;
 &lt;/packed&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runComplexSingleBranch()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc8" desc="p:group"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runGroup()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc9a" desc="successful p:try"&gt;
    &lt;expected&gt;&lt;wrapme&gt;&lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt;&lt;/wrapme&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runTryCatch()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc9b" desc="p:try which fails and fallsback to catch"&gt;
    &lt;expected&gt;&lt;c&gt;aaa&lt;a id="1"&gt;&lt;b id="2"&gt;test&lt;/b&gt;&lt;/a&gt;&lt;/c&gt; &lt;/expected&gt;
    &lt;result&gt;{txproc:runTryCatch1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc10" desc="p:for-each"&gt;
    &lt;expected&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;d&gt;&lt;a&gt;1&lt;/a&gt;&lt;/d&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runForEach()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc11" desc="p:viewport"&gt;
    &lt;expected&gt;&lt;z&gt;&lt;a&gt;1&lt;/a&gt;&lt;/z&gt;&lt;z&gt;&lt;a&gt;&lt;l&gt;test&lt;/l&gt;&lt;/a&gt;&lt;/z&gt;&lt;z&gt;&lt;a&gt;&lt;l&gt;test&lt;/l&gt;&lt;/a&gt;&lt;/z&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runViewPort()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc12a" desc="p:choose with p:when"&gt;
    &lt;expected&gt;&lt;z&gt;&lt;c&gt;&lt;a&gt;test1&lt;/a&gt;&lt;a&gt;test2&lt;/a&gt;&lt;/c&gt;&lt;/z&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runChoose()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc12b" desc="p:choose with p:otherwise"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runChoose1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc13" desc="p:compare"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;false&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runCompare1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc14" desc="p:count"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;3&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runCount1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc14a" desc="p:count"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;1&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runCount2()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc16" desc="p:pack"&gt;
    &lt;expected&gt;&lt;sequence-wrapper&gt;&lt;wrapper&gt;&lt;doc1/&gt;&lt;doc-a/&gt;&lt;/wrapper&gt;&lt;wrapper&gt;&lt;doc2/&gt;&lt;doc-b/&gt;&lt;/wrapper&gt;&lt;wrapper&gt;&lt;doc3/&gt;&lt;doc-c/&gt;&lt;/wrapper&gt;&lt;/sequence-wrapper&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runPack1()}&lt;/result&gt;
  &lt;/test&gt;

  &lt;test name="xproc17" desc="p:pack"&gt;
    &lt;expected&gt;&lt;sequence-wrapper&gt;&lt;wrapper&gt;&lt;doc1/&gt;&lt;doc-a/&gt;&lt;/wrapper&gt;&lt;wrapper&gt;&lt;doc2/&gt;&lt;doc-b/&gt;&lt;/wrapper&gt;&lt;wrapper&gt;&lt;doc3/&gt;&lt;doc-c/&gt;&lt;/wrapper&gt;&lt;/sequence-wrapper&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runPack1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc18" desc="p:declare-step"&gt;
    &lt;expected&gt;&lt;c:result&gt;2&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runDeclareStep1()}&lt;/result&gt;
  &lt;/test&gt;
  &lt;test name="xproc19" desc="p:rename"&gt;
    &lt;expected&gt; &lt;doc test2:bar="value" xmlns:test2="http://test2.com"/&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runRename1()}&lt;/result&gt;
  &lt;/test&gt;

  &lt;test name="xproc20" desc="ext:xproc"&gt;
    &lt;expected&gt;&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;2&lt;/c:result&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runExtXProc1()}&lt;/result&gt;
  &lt;/test&gt;












  &lt;!--test name="xproc15" desc="p:delete"&gt;
    &lt;expected&gt;&lt;p:pipeline name="pipeline" xmlns:p="http://www.w3.org/ns/xproc"&gt;



&lt;/p:pipeline&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runDelete1()}&lt;/result&gt;
  &lt;/test--&gt;

  &lt;!--test name="xproc6" desc="test throwing dynamic error"&gt;
    &lt;expected&gt;&lt;/expected&gt;
    &lt;result&gt;{txproc:runDynamicError()}&lt;/result&gt;
  &lt;/test--&gt;
&lt;/testsuite&gt;
)

(:
-- Local Variables:
-- compile-command: "../../../bin/test.sh all-xproc.xqy &gt; ../../../report/all-xproc.html"
-- End:
:)
</pre></div><br/><div class="footer"><p style="text-align:right"><i/> |
          generated by xquerydoc <a href="https://github.com/xquery/xquerydoc" target="xquerydoc">https://github.com/xquery/xquerydoc</a></p></div></div><script type="application/javascript">
	  window.onload = function(){ prettyPrint(); }
	</script></body></html>